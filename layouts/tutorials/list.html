{{ define "main" }}
<div class="container mx-auto px-4 py-8">
    <!-- Header -->
    <div class="text-center mb-12">
        <h1 class="text-4xl font-bold mb-4">{{ .Title }}</h1>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">{{ .Description }}
        </p>
    </div>

    <!-- Filters -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-8">
        <div class="flex flex-wrap gap-4 items-center">
            <div class="flex items-center space-x-2">
                <label
                    class="text-sm font-medium text-gray-700">Difficulty:</label>
                <select id="difficulty-filter"
                    class="filter-select border border-gray-300 rounded-md px-3 py-1 text-sm"
                    data-filter="difficulty">
                    <option value="">All Levels</option>
                    <option value="beginner">Beginner</option>
                    <option value="intermediate">Intermediate</option>
                    <option value="advanced">Advanced</option>
                </select>
            </div>

            <div class="flex items-center space-x-2">
                <label
                    class="text-sm font-medium text-gray-700">Duration:</label>
                <select id="duration-filter"
                    class="filter-select border border-gray-300 rounded-md px-3 py-1 text-sm"
                    data-filter="duration">
                    <option value="">Any Duration</option>
                    <option value="short">Under 30 min</option>
                    <option value="medium">30-60 min</option>
                    <option value="long">Over 60 min</option>
                </select>
            </div>

            <div class="flex items-center space-x-2">
                <label class="text-sm font-medium text-gray-700">Type:</label>
                <select id="type-filter"
                    class="filter-select border border-gray-300 rounded-md px-3 py-1 text-sm"
                    data-filter="tutorial_type">
                    <option value="">All Types</option>
                    <option value="step-by-step">Step-by-Step</option>
                    <option value="video">Video</option>
                    <option value="interactive">Interactive</option>
                </select>
            </div>

            <div class="flex-1">
                <input type="text" id="search-input"
                    placeholder="Search tutorials..."
                    class="w-full border border-gray-300 rounded-md px-3 py-1 text-sm">
            </div>
        </div>
    </div>

    <!-- Tutorial Grid -->
    <div id="tutorial-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {{ range .Pages }}
        {{ $difficultyColor := "green" }}
        {{ if eq .Params.difficulty "intermediate" }}{{ $difficultyColor =
        "yellow" }}{{ end }}
        {{ if eq .Params.difficulty "advanced" }}{{ $difficultyColor = "red"
        }}{{ end }}

        <div class="filterable-item tutorial-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"
            data-difficulty="{{ .Params.difficulty }}"
            data-duration="{{ .Params.duration }}"
            data-tutorial_type="{{ .Params.tutorial_type }}"
            data-title="{{ .Title | lower }}"
            data-description="{{ .Description | lower }}"
            data-tags="{{ delimit .Params.tags " " }}">

            {{ if .Params.featured_image }}
            <img src="{{ .Params.featured_image }}" alt="{{ .Title }}"
                class="w-full h-48 object-cover">
            {{ else }}
            <div
                class="w-full h-48 bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center">
                <svg class="w-16 h-16 text-white" fill="none"
                    stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        stroke-width="2"
                        d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253">
                    </path>
                </svg>
            </div>
            {{ end }}

            <div class="p-6">
                <div class="flex items-center justify-between mb-3">
                    <span
                        class="px-2 py-1 bg-{{ $difficultyColor }}-100 text-{{ $difficultyColor }}-800 rounded-full text-xs font-medium">
                        {{ .Params.difficulty | title }}
                    </span>
                    <span class="text-xs text-gray-500">
                        <svg class="w-3 h-3 inline mr-1" fill="none"
                            stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                stroke-width="2"
                                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z">
                            </path>
                        </svg>
                        {{ .Params.duration | default "30 min" }}
                    </span>
                </div>

                <h3 class="text-lg font-semibold mb-2">
                    <a href="{{ .Permalink }}"
                        class="hover:text-blue-600 transition-colors">{{ .Title
                        }}</a>
                </h3>

                <p class="text-gray-600 text-sm mb-4 line-clamp-3">{{
                    .Description }}</p>

                <div class="flex items-center justify-between">
                    <div
                        class="flex items-center space-x-2 text-xs text-gray-500">
                        {{ if .Params.progress_tracking }}
                        <span class="flex items-center">
                            <svg class="w-3 h-3 mr-1" fill="none"
                                stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round"
                                    stroke-linejoin="round" stroke-width="2"
                                    d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z">
                                </path>
                            </svg>
                            Progress Tracking
                        </span>
                        {{ end }}
                        {{ if .Params.skill_assessment }}
                        <span class="flex items-center">
                            <svg class="w-3 h-3 mr-1" fill="none"
                                stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round"
                                    stroke-linejoin="round" stroke-width="2"
                                    d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z">
                                </path>
                            </svg>
                            Assessment
                        </span>
                        {{ end }}
                    </div>

                    <a href="{{ .Permalink }}"
                        class="text-blue-600 hover:text-blue-700 text-sm font-medium">
                        Start Tutorial â†’
                    </a>
                </div>
            </div>
        </div>
        {{ end }}
    </div>

    <!-- No Results Message -->
    <div id="no-results" class="text-center py-12 hidden">
        <svg class="w-16 h-16 text-gray-400 mx-auto mb-4" fill="none"
            stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round"
                stroke-width="2"
                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
        <h3 class="text-lg font-medium text-gray-900 mb-2">No tutorials found
        </h3>
        <p class="text-gray-600">Try adjusting your filters or search terms.</p>
    </div>
</div>
{{ end }}